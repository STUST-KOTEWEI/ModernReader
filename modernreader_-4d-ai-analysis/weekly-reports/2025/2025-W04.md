# 週報 - 2025 年第 4 週

**報告期間**: 2025-10-20 ~ 2025-10-26  
**填寫日期**: 2025-10-21  
**報告人**: [柯德瑋]  
**當前階段**: 大一上

---

## 📊 本週完成事項（滾動更新）

### 開發工作

- [ ] **與合作夥伴 widget 對接測試**
  - 完成度: 0% →（本週中更新）
  - 交付成果: Partner Widget 範例

### 會議與溝通

- [x] 10/20（一）10:00 每週站會（已完成）
  - 討論: 對接資料欄位、測試腳本、驗收標準
  - 決策: 本週先完成資料對映與心跳檢查

---

## 🎯 下週計畫（第 5 週：10/27-11/02）

- [ ] 完成 widget 對接測試與驗收
- [ ] 撰寫對接技術紀錄與 FAQ
- [ ] 準備 11 月期中成果發表草稿

---

## ⚠️ 遇到的問題與風險（預留）

- 問題: [預留]
- 應對: [預留]

---

## 📈 KPI 追蹤（預留）

- 測試用戶數: [預留]
- 完成功能模組: [預留]

---

## ✅ 對接測試驗收清單

請在 10/26 前完成以下驗收項目並附上證據（截圖/錄影/日誌）。

### 基礎檢查

- [ ] API 金鑰與權限驗證通過（401/403 不出現）
- [ ] 環境變數配置正確（不硬編 API Key）
- [ ] 網域/端點白名單完成

### 欄位對映（Mapping）

- [ ] 需求欄位列表整理（名稱/型別/單位/可空）
- [ ] 對映表產出（本地 → 夥伴）
- [ ] 時間格式/時區一致（ISO 8601, Asia/Taipei）
- [ ] Unicode/Emoji 正確傳遞

### 可用性與可靠度

- [ ] 心跳/健康檢查端點可用（200/OK）
- [ ] 重試策略（指數退避，最大 N 次）
- [ ] 逾時與取消（Timeout/AbortController）
- [ ] 節流/速率限制（429 處理與重試）

### 錯誤處理

- [ ] 錯誤碼規格表（4xx/5xx 分類與訊息）
- [ ] 可恢復 vs. 致命錯誤判斷
- [ ] 例外捕捉與回報（Sentry/Log）

### 安全與隱私

- [ ] TLS/HTTPS 憑證有效
- [ ] 敏感資訊遮罩（日誌/畫面）
- [ ] 最小必要資料原則（Data Minimization）

### 驗收輸出

- [ ] 驗收測試報告（案例/結果/日誌）
- [ ] 截圖或錄影（成功/失敗路徑）
- [ ] 快速啟動文件（如何重現）

---

## 🛠️ 故障排除 FAQ（Widget 對接）

### 1) 401/403 未授權

- 檢查 API Key 是否透過 Header/Query 正確傳遞
- 檢查時效性（有無過期/時差問題）
- 檢查權限範圍（Scope）是否涵蓋端點

### 2) CORS 錯誤

- 夥伴端加入 Origin 白名單
- 預檢請求（OPTIONS）需允許 Headers/Methods

### 3) 憑證/HTTPS 問題

- 開發環境使用受信任的本機憑證（例如 mkcert）
- 檢查日期、SAN 名稱、鏈結是否完整

### 4) 時區/時間格式錯誤

- 統一使用 ISO 8601（例：2025-10-21T10:00:00+08:00）
- 伺服器轉換為 UTC 存儲、前端顯示依時區格式化

### 5) 文字符號/編碼問題

- 確保 UTF-8，避免 JSON 轉義錯誤
- 後端回應 Header 設定 `Content-Type: application/json; charset=utf-8`

### 6) 速率限制/節流（429）

- 採用指數退避重試，加入隨機抖動（jitter）
- 尊重 `Retry-After` Header

### 7) WebSocket 不穩定

- 啟用 ping/pong（心跳）與自動重連
- 設定最大重試次數與退避策略


**填寫人**: [柯德瑋]  
**填寫日期**: 2025-10-21  
**下次檢視**: 2025-10-27（週一站會後）
