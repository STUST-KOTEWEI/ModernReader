# 🧪 STT 與相機功能測試指南

## 快速測試步驟

### ✅ 前置條件檢查
所有服務已啟動：
- ✅ Vite 前端: http://localhost:3000
- ✅ Mock AI 服務: localhost:7860, 5002, 5003

---

## 1️⃣ 語音輸入測試

### 測試步驟
1. 開啟瀏覽器到 http://localhost:3000
2. 進入 Reader 頁面
3. 找到「🎤 語音輸入」按鈕（在輸入區域下方）
4. 點擊按鈕
5. 瀏覽器會要求麥克風權限 → **允許**
6. 開始說話（建議說繁體中文）
7. 觀察按鈕變為「辨識中…（點擊停止）」並開始閃爍
8. 說完後點擊按鈕停止，或等待自動停止
9. 辨識的文字應該自動填入文字區域

### 測試案例
```
測試句 1: "今天天氣真好"
測試句 2: "我想要學習人工智慧"
測試句 3: "這是一個語音轉文字的測試"
```

### 預期結果
- ✅ 按鈕狀態正確切換
- ✅ 辨識中顯示即時轉錄文字
- ✅ 停止後文字自動填入
- ✅ 可以連續使用多次

### 可能問題
- ❌ **「語音辨識不可用」**: 瀏覽器不支援 → 改用 Chrome/Edge
- ❌ **沒有反應**: 檢查麥克風權限
- ❌ **辨識結果不準**: 環境太吵或發音不清

---

## 2️⃣ 相機掃描測試

### 測試步驟
1. 在 Reader 頁面上方
2. 點擊「Scan」輸入模式按鈕
3. 點擊「Start Camera」
4. 瀏覽器會要求相機權限 → **允許**
5. 相機視訊應該顯示在畫面中
6. 對準要掃描的文字（建議準備印刷文件或螢幕文字）
7. 點擊「📸 Capture Text」
8. 等待「Extracting Text...」載入動畫
9. 辨識的文字應該自動填入文字區域
10. 可以點擊「✕ Close」關閉相機

### 測試素材建議
```
推薦測試素材:
1. 印刷書籍/文件（效果最好）
2. 電腦螢幕上的文字
3. 手機螢幕上的文字
4. 手寫文字（可能較不準確）
```

### 預期結果
- ✅ 相機視訊清晰顯示
- ✅ 擷取時顯示載入動畫
- ✅ 辨識的文字填入輸入區
- ✅ 可以關閉相機

### 可能問題
- ❌ **相機無法啟動**: 檢查相機權限
- ❌ **黑屏**: 確認相機沒有被其他程式占用
- ❌ **OCR 失敗**: 光線不足或文字模糊
- ❌ **提示 "Failed to extract text"**: OCR 服務異常（正常，使用 mock）

---

## 3️⃣ 沉浸式閱讀視訊追蹤測試

### 測試步驟
1. 完成一次文字分析（輸入文字 → Engage Cognitive Core）
2. 點擊「Immersive Experience」進入沉浸式模式
3. 在控制面板中啟用「手勢控制」或「眼動追蹤」
4. 視訊預覽應該出現在**右下角**
5. 確認視訊正常顯示且有標籤說明

### 預期結果
- ✅ 視訊預覽出現在右下角
- ✅ 半透明背景，不遮擋主要內容
- ✅ 顯示「手勢追蹤」或「眼動追蹤」標籤
- ✅ 視訊畫質清晰

### 可能問題
- ❌ **視訊沒出現**: 確認已啟用手勢或眼動追蹤
- ❌ **相機權限**: 需要再次允許

---

## 🔍 除錯工具

### 瀏覽器開發者工具
打開 Console (F12) 查看日誌：

```javascript
// 檢查 Web Speech API 支援
console.log('SpeechRecognition:', 
  'webkitSpeechRecognition' in window || 'SpeechRecognition' in window);

// 檢查相機 API 支援
console.log('getUserMedia:', 
  !!navigator.mediaDevices?.getUserMedia);
```

### 權限檢查
在瀏覽器網址列左側點擊鎖頭圖示：
- 🎤 麥克風權限: 應該設為「允許」
- 📷 相機權限: 應該設為「允許」

### 重置權限
如果權限有問題：
1. Chrome: 設定 → 隱私權和安全性 → 網站設定 → 權限
2. 找到 localhost:3000
3. 重設權限並重新載入頁面

---

## 📊 效能測試

### 語音辨識效能
- 延遲: < 1秒（取決於網路）
- CPU 使用: 低（瀏覽器處理）
- 記憶體: < 50MB

### 相機掃描效能
- 擷取時間: < 500ms
- OCR 處理: 1-3秒（取決於圖片大小）
- CPU 使用: 中等

---

## ✅ 驗收清單

### 語音輸入
- [ ] 可以點擊啟動語音辨識
- [ ] 按鈕狀態正確顯示
- [ ] 即時顯示轉錄文字
- [ ] 辨識結果準確填入
- [ ] 可以連續使用多次
- [ ] 錯誤提示友善

### 相機掃描
- [ ] 可以啟動相機
- [ ] 視訊畫面清晰
- [ ] 擷取功能正常
- [ ] 載入動畫顯示
- [ ] OCR 結果填入
- [ ] 可以關閉相機

### 沉浸式視訊
- [ ] 視訊出現在正確位置
- [ ] 不遮擋主要內容
- [ ] 顯示追蹤模式標籤
- [ ] 視訊品質良好

---

## 🎯 已知限制與備註

### 語音辨識
- Chrome/Edge 支援最佳
- Safari 需 14.1+
- Firefox 需手動啟用
- 需要安靜環境

### 相機掃描
- 需要 HTTPS 或 localhost
- OCR 目前使用 mock（回傳測試訊息）
- 真實 OCR 需整合 Tesseract.js 或雲端服務

### 視訊追蹤
- 手勢和眼動追蹤尚在開發中
- 視訊預覽只是佔位，實際功能待實作

---

## 📞 問題回報

如果發現任何問題，請記錄：
1. 瀏覽器類型和版本
2. 錯誤訊息（Console 日誌）
3. 重現步驟
4. 預期行為 vs 實際行為

---

**測試完成後，所有功能應該都能正常運作！** 🎉
